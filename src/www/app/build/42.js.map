{"version":3,"sources":["../../src/pages/downloads/downloads.module.ts","../../src/pages/downloads/downloads.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACJ;AAU5C,IAAa,mBAAmB,GAAhC;CAAmC;AAAtB,mBAAmB;IAR/B,+DAAQ,CAAC;QACR,YAAY,EAAE;YACZ,iEAAa;SACd;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,iEAAa,CAAC;SACxC;KACF,CAAC;GACW,mBAAmB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZU;AACmD;AACnD;AAQ1C,IAAa,aAAa,GAA1B;IAKE,YACS,OAAsB,EACtB,SAAoB,EACnB,IAAU,EACV,KAAsB,EACtB,IAAuB;QAJxB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,SAAI,GAAJ,IAAI,CAAM;QACV,UAAK,GAAL,KAAK,CAAiB;QACtB,SAAI,GAAJ,IAAI,CAAmB;QAR1B,WAAM,GAAU,EAAE,CAAC;IAU1B,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAEK,UAAU;;YAEd,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAC,OAAO,EAAE,gCAAgC,EAAC,CAAC,CAAC;YACxE,CAAC,CAAC,OAAO,EAAE,CAAC;YAEZ,IAAI;gBAEF,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,cAAc,CAAC,CAAC;gBAC9E,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAElB,KAAK,MAAM,IAAI,IAAI,IAAI,EAAE;oBACvB,IAAI,IAAI,CAAC,MAAM,EAAE;wBAEf,MAAM,IAAI,GAAG,YAAY,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;wBAC1D,IAAI,CAAC,KAAK,GAAG,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC;wBAE1B,IAAI,IAAI,EAAE;4BAER,MAAM,KAAK,GAAY,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;4BACxC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;4BAEnB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;gCACf,IAAI,EAAE,KAAK,CAAC,IAAI;gCAChB,IAAI,EAAE,IAAI,CAAC,SAAS;gCACpB,EAAE,EAAE,KAAK,CAAC,EAAE;gCACZ,IAAI,EAAE,IAAI,CAAC,IAAI;6BAChB,CAAC,CAAC;yBAEJ;qBAEF;iBACF;gBAED,CAAC,CAAC,OAAO,EAAE,CAAC;aAEb;YAAC,OAAO,KAAK,EAAE;gBACd,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAC,OAAO,EAAE,KAAK,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC,OAAO,EAAE;gBACrE,CAAC,CAAC,OAAO,EAAE,CAAC;gBACZ,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;aACpB;QAEH,CAAC;KAAA;IAED,UAAU,CAAC,IAAY;QACrB,YAAY,CAAC,UAAU,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC;QACxC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAC,OAAO,EAAE,6BAA6B,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC,OAAO,EAAE,CAAC;QACtF,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;CAEF;AAnEY,aAAa;IAJzB,gEAAS,CAAC;QACT,QAAQ,EAAE,gBAAgB;OACG;KAC9B,CAAC;yEAO+B;QACX,iEAAS;QACb,sEAAI;QACH,wEAAe;QAChB,UAAiB;AAyDlC;SAnEY,aAAa,e","file":"42.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DownloadsPage } from './downloads';\n\n@NgModule({\n  declarations: [\n    DownloadsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DownloadsPage),\n  ],\n})\nexport class DownloadsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/downloads/downloads.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, LoadingController } from 'ionic-angular';\nimport { File } from '@ionic-native/file';\nimport { Content } from '../../app/app.models';\n\n@IonicPage()\n@Component({\n  selector: 'page-downloads',\n  templateUrl: 'downloads.html',\n})\nexport class DownloadsPage {\n\n  public clases: any[] = [];\n  public debug: any;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private file: File,\n    private toast: ToastController,\n    private load: LoadingController,\n  ) {\n  }\n\n  ionViewDidLoad() {\n    this.loadClases();\n  }\n\n  async loadClases() {\n\n    const l = this.load.create({content: 'Cargando clases descargadas...'});\n    l.present();\n\n    try {\n\n      const list = await this.file.listDir(this.file.dataDirectory, '.zamna-cache');\n      this.debug = list;\n\n      for (const file of list) {\n        if (file.isFile) {\n\n          const data = localStorage.getItem(`offline-${file.name}`);\n          this.debug = {json: data};\n\n          if (data) {\n\n            const clase: Content = JSON.parse(data);\n            this.debug = clase;\n\n            this.clases.push({\n              name: clase.name,\n              path: file.nativeURL,\n              id: clase.id,\n              file: file.name,\n            });\n\n          }\n\n        }\n      }\n\n      l.dismiss();\n\n    } catch (error) {\n      this.toast.create({message: error.message, duration: 2000}).present()\n      l.dismiss();\n      this.debug = error;\n    }\n\n  }\n\n  removeFile(name: string) {\n    localStorage.removeItem(`file-${name}`);\n    this.toast.create({message: 'Clase borrada correctamente', duration: 2000}).present();\n    this.loadClases();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/downloads/downloads.ts"],"sourceRoot":""}