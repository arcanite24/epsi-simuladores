{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACZ;AAUpC;IAAA;IAA8B,CAAC;IAAlB,eAAe;QAR3B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,yDAAS;aACV;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,yDAAS,CAAC;aACpC;SACF,CAAC;OACW,eAAe,CAAG;IAAD,sBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACVD;AAGJ;AAC4C;AAGhC;AAEkC;AACX;AAO1D;IAUE,mBACS,OAAsB,EACtB,SAAoB,EACnB,IAAkB,EAClB,MAAuB,EACvB,IAAe,EACf,QAAkB,EACnB,GAAiB;QAP1B,iBAeC;QAdQ,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,SAAI,GAAJ,IAAI,CAAc;QAClB,WAAM,GAAN,MAAM,CAAiB;QACvB,SAAI,GAAJ,IAAI,CAAW;QACf,aAAQ,GAAR,QAAQ,CAAU;QACnB,QAAG,GAAH,GAAG,CAAc;QAfnB,UAAK,GAAW,EAAE;QAClB,aAAQ,GAAW,EAAE;QACrB,UAAK,GAAY,KAAK;QAIrB,cAAS,GAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;QAYvD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAI;YAC5B,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,IAAI,IAAI;gBAAE,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;QAC5C,CAAC,CAAC;IAEJ,CAAC;IAED,kCAAc,GAAd;QAAA,iBAeC;QAbC,IAAM,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC;QAEvC,IAAI,GAAG,EAAE;YACP,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,cAAI;gBACtE,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;YAClC,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;gBAEV,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;gBACrE,IAAI,IAAI;oBAAE,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC;YAEnD,CAAC,CAAC;SACH;IAEH,CAAC;IAED,uCAAmB,GAAnB;QACE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC;IACvC,CAAC;IAED,yCAAqB,GAArB;QACE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC;IACzC,CAAC;IAED,sCAAkB,GAAlB,UAAmB,KAAa,EAAE,QAAgB;QAChD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,KAAK,EAAE,QAAQ,CAAC;IAC9D,CAAC;IAtDU,SAAS;QAJrB,gEAAS,CAAC;YACT,QAAQ,EAAE,YAAY;WACG;SAC1B,CAAC;6EAY+B;YACX,0EAAS;YACb,kEAAY;YACV,2EAAe;YACjB,gEAAS;YACL,kFAAQ;YACd,MAAY;OAjBf,SAAS,CAiTrB;IAAD,CAAC;AAAA;SAjTY,SAAS,e","file":"35.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import {\n  AngularFireAuth\n} from 'angularfire2/auth';\nimport {\n  Component\n} from '@angular/core';\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  Platform,\n} from 'ionic-angular';\nimport {\n  BackProvider\n} from '../../providers/back/back';\n\nimport { AuthProvider as ZamnaAuth } from '../../providers/auth/auth'\nimport {InAppBrowser} from \"@ionic-native/in-app-browser\";\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\n  public email: string = ''\n  public password: string = ''\n  public admin: boolean = false\n\n  public user: any\n\n  private isBrowser: boolean = !this.platform.is('cordova')\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private back: BackProvider,\n    private afAuth: AngularFireAuth,\n    private auth: ZamnaAuth,\n    private platform: Platform,\n    public iap: InAppBrowser,\n  ) {\n\n    this.auth.user$.subscribe(user => {\n      this.user = true;\n      if (user) this.navCtrl.setRoot('HomePage')\n    })\n\n  }\n\n  ionViewDidLoad() {\n\n    const uid = localStorage.getItem('uid')\n\n    if (uid) {\n      this.back.saveFcmToken(uid, localStorage.getItem('fcm_token')).then(data => {\n        this.navCtrl.setRoot('HomePage')\n      }).catch(err => {\n\n        const list = JSON.parse(localStorage.getItem('zamnademy-cache-list'))\n        if (list) this.navCtrl.setRoot('SimuladoresPage')\n\n      })\n    }\n\n  }\n\n  loginGoogleFirebase() {\n    this.auth.loginGoogle(this.isBrowser)\n  }\n\n  loginFacebookFirebase() {\n    this.auth.loginFacebook(this.isBrowser)\n  }\n\n  loginEmailFirebase(email: string, password: string) {\n    this.afAuth.auth.signInWithEmailAndPassword(email, password)\n  }\n\n  /* login(email: string, password: string) {\n\n    const l = this.load.create({\n      content: 'Iniciando sesión...'\n    })\n    l.present()\n\n    this.back.login(email, password).subscribe(data => {\n      console.log(data)\n      if (data.err) {\n        this.toast.create({\n          message: data.err,\n          duration: 2000\n        }).present()\n        l.dismiss()\n      }\n      localStorage.setItem('user', JSON.stringify(data.user))\n      localStorage.setItem('token', data.token)\n      localStorage.setItem('uid', data.user.id)\n      this.back.saveFcmToken(data.user.id, localStorage.getItem('fcm_token')).then(data => console.log(data)).catch(err => this.toast.create({\n        message: 'No se pudo registrar tu dispositivo...',\n        duration: 2000\n      }).present())\n      this.navCtrl.setRoot('HomePage')\n      l.dismiss()\n    }, err => {\n      this.toast.create({\n        message: 'No pudimos inicar sesión con tu cuenta',\n        duration: 2000\n      }).present()\n      l.dismiss()\n    })\n\n  }\n\n  async loginFacebook() {\n\n    const l = this.load.create({\n      content: 'Iniciando sesión con Facebook...'\n    })\n    l.present()\n\n    try {\n      const res: FacebookLoginResponse = await this.fb.login(['public_profile', 'email'])\n      const fbProfile = await this.fb.api('me?fields=id,name,email,first_name,picture.width(720).height(720).as(picture_large)', [])\n      this.back.facebookApp(res.authResponse.accessToken, fbProfile.email).subscribe(data => {\n        if (data.err) return this.toast.create({\n          message: data.err,\n          duration: 2000\n        }).present()\n        localStorage.setItem('user', JSON.stringify(data.user))\n        localStorage.setItem('token', data.token)\n        localStorage.setItem('uid', data.user.id)\n        this.back.saveFcmToken(data.user.id, localStorage.getItem('fcm_token')).then(data => console.log(data)).catch(err => this.toast.create({\n          message: 'No se pudo registrar tu dispositivo...',\n          duration: 2000\n        }).present())\n        this.navCtrl.setRoot('HomePage')\n        l.dismiss()\n      }, err => {\n        this.toast.create({\n          message: 'No pudimos inicar sesión con tu Facebook',\n          duration: 2000\n        }).present()\n        l.dismiss()\n      })\n    } catch (error) {\n      l.dismiss()\n      this.toast.create({\n        message: 'No pudimos inicar sesión con tu Facebook',\n        duration: 2000\n      }).present()\n    }\n\n  } */\n\n  /*\n  async loginGoogle() {\n\n    const l = this.load.create({content: 'Iniciando sesión con Google...'})\n    //l.present()\n\n    try {\n      const res = await this.google.login({})\n      this.back.googleApp(res).subscribe(data => {\n        if (data.err) return this.toast.create({message: data.err, duration: 2000}).present()\n        localStorage.setItem('user', JSON.stringify(data.user))\n        localStorage.setItem('token', data.token)\n        localStorage.setItem('uid', data.user.id)\n        this.back.saveFcmToken(data.user.id, localStorage.getItem('fcm_token')).then(data => console.log(data)).catch(err => this.toast.create({message: 'No se pudo registrar tu dispositivo...', duration: 2000}).present())\n        this.navCtrl.setRoot('HomePage')\n        l.dismiss()\n      }, err => {\n        this.toast.create({message: err.message, duration: 2000}).present()  \n        l.dismiss()\n      })\n    } catch (error) {\n      this.toast.create({message: error.message, duration: 2000}).present()\n      l.dismiss()\n    }\n\n  }\n  */\n\n  /* async loginGoogle() {\n\n    const l = this.load.create({\n      content: 'Iniciando sesión con Google...'\n    })\n    l.present()\n\n    this.google.login({})\n      .then(res => {\n        this.handleGoogleLogin(res, l)\n      })\n      .catch(err => {\n        this.toast.create({message: err.message, duration: 2000}).present()\n        l.dismiss()\n      })\n\n  }\n\n  handleGoogleLogin(res, l) {\n    this.back.googleApp(res).subscribe(data => {\n      if (data.err) return this.toast.create({\n        message: data.err,\n        duration: 4000\n      }).present()\n      localStorage.setItem('user', JSON.stringify(data.user))\n      localStorage.setItem('token', data.token)\n      localStorage.setItem('uid', data.user.id)\n      this.back.saveFcmToken(data.user.id, localStorage.getItem('fcm_token')).then(data => console.log(data)).catch(err => this.toast.create({\n        message: 'No se pudo registrar tu dispositivo...',\n        duration: 2000\n      }).present())\n      this.navCtrl.setRoot('HomePage')\n      l.dismiss()\n    }, err => {\n      this.toast.create({\n        message: 'No pudimos inicar sesión con tu cuenta de Google',\n        duration: 2000\n      }).present()\n      l.dismiss()\n    })\n  } */\n\n  /* async loginGoogleFirebase() {\n\n    const l = this.load.create({\n      content: 'Iniciando sesión con Google...'\n    })\n    l.present()\n\n    const provider = new firebase.auth.GoogleAuthProvider()\n\n    if (!( < any > window).cordova) {\n      this.auth.auth.signInWithPopup(provider)\n        .then((res) => {\n\n          this.back.googleApp({\n            userId: res.user.uid,\n            givenName: res.user.displayName,\n            familyName: ' ',\n            email: res.user.email,\n            imageUrl: res.user.photoURL\n          }).subscribe(data => {\n            if (data.err) return this.toast.create({\n              message: data.err,\n              duration: 2000\n            }).present()\n            localStorage.setItem('user', JSON.stringify(data.user))\n            localStorage.setItem('token', data.token)\n            localStorage.setItem('uid', data.user.id)\n            this.back.saveFcmToken(data.user.id, localStorage.getItem('fcm_token')).then(data => console.log(data)).catch(err => this.toast.create({\n              message: 'No se pudo registrar tu dispositivo...',\n              duration: 2000\n            }).present())\n            this.navCtrl.setRoot('HomePage')\n            l.dismiss()\n          }, err => {\n            this.toast.create({\n              message: 'No pudimos inicar sesión con tu cuenta de Google',\n              duration: 2000\n            }).present()\n            l.dismiss()\n          })\n\n        })\n    } else {\n      this.auth.auth.signInWithRedirect(provider)\n        .then(() => {\n          this.auth.auth.getRedirectResult().then(res => {\n\n            this.back.googleApp({\n              userId: res.user.uid,\n              givenName: res.user.displayName,\n              familyName: ' ',\n              email: res.user.email,\n              imageUrl: res.user.photoURL\n            }).subscribe(data => {\n              if (data.err) return this.toast.create({\n                message: data.err,\n                duration: 2000\n              }).present()\n              localStorage.setItem('user', JSON.stringify(data.user))\n              localStorage.setItem('token', data.token)\n              localStorage.setItem('uid', data.user.id)\n              this.back.saveFcmToken(data.user.id, localStorage.getItem('fcm_token')).then(data => console.log(data)).catch(err => this.toast.create({\n                message: 'No se pudo registrar tu dispositivo...',\n                duration: 2000\n              }).present())\n              this.navCtrl.setRoot('HomePage')\n              l.dismiss()\n            }, err => {\n              this.toast.create({\n                message: 'No pudimos inicar sesión con tu cuenta de Google',\n                duration: 2000\n              }).present()\n              l.dismiss()\n            })\n\n          }).catch(function (error) {\n            l.dismiss()\n          })\n        })\n    }\n  } */\n\n  /* private firebaseAuth(provider: AuthProvider) {\n\n    if (!(<any>window).cordova) {\n      return this.afAuth.auth.signInWithPopup(provider)\n    } else {\n\n      return this.afAuth.auth.signInWithRedirect(provider)\n        .then(() => {\n          return this.afAuth.auth.getRedirectResult()\n            .then(result => {\n              this.toast.create({message: JSON.stringify(result.user), duration: 6000}).present()\n            })\n            .catch(err => {\n              this.toast.create({message: err.message, duration: 6000}).present()\n            })\n        })\n\n    }\n\n  } */\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}