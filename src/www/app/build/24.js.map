{"version":3,"sources":["../../src/pages/notifications/notifications.module.ts","../../src/pages/notifications/notifications.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NotificationsPage } from './notifications';\n\n@NgModule({\n  declarations: [\n    NotificationsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(NotificationsPage),\n  ],\n})\nexport class NotificationsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notifications/notifications.module.ts","import { BackProvider } from './../../providers/back/back';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, LoadingController, ViewController } from 'ionic-angular';\nimport moment from 'moment'\n\n@IonicPage()\n@Component({\n  selector: 'page-notifications',\n  templateUrl: 'notifications.html',\n})\nexport class NotificationsPage {\n\n  private notis: any[] = []\n  private uid: string = localStorage.getItem('uid')\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private back: BackProvider,\n    private toast: ToastController,\n    private load: LoadingController,\n    private viewCtrl: ViewController\n  ) {\n  }\n\n  ionViewDidLoad() {\n    this.loadNotis()\n  }\n\n  reload(e) { this.loadNotis(() => e.complete()) }\n\n  loadNotis(cb?: Function) {\n    \n    const l = this.load.create({content: 'Cargando notificaciones...'})\n    l.present()\n\n    this.back.getNotisUser(this.uid).subscribe(data => {\n      this.notis = data\n      l.dismiss()\n      if (cb) cb()\n    }, err => {\n      l.dismiss()\n      this.toast.create({message: 'No se pudieron cargar las notificaciones', duration: 2000}).present()\n      this.viewCtrl.dismiss()\n    })\n\n  }\n\n  setRead(id: string, i: number, read?: boolean) {\n\n    if (read) return\n\n    this.notis[i].read = true\n    this.back.updateNoti(id, {read: this.notis[i].read}).subscribe(data => {\n      console.log(data)\n    }, err => {\n      this.notis[i].read = read\n      this.toast.create({message: 'No se pudo marcar como leída la notificación...', duration: 2000}).present()\n    })\n\n  }\n\n  getDate(date: string) {\n    return moment(date).fromNow()\n  }\n\n  handleClick(noti) {\n    if(noti.hilo) this.navCtrl.push('HiloDetailPage', {id: noti.hilo.id})\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notifications/notifications.ts"],"sourceRoot":""}