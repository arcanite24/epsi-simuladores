<form [formGroup]="addForm" (ngSubmit)="submitForm()">

  <h1>Agregar Contenido</h1>

  <div class="epsi-input">
    <label for="">Nombre</label>
    <input type="text" formControlName="name">
  </div>

  <div class="epsi-input">
    <label for="">URL de Video</label>
    <input type="text" formControlName="video">
  </div>

  <div class="epsi-input">
    <label for="">Descripción</label>
    <textarea formControlName="description"></textarea>
  </div>

  <div class="epsi-input">
    <label for="">Tipo</label>
    <select formControlName="type">
      <option [value]="type" *ngFor="let type of contentTypes">{{type}}</option>
    </select>
  </div>

  <div class="epsi-input" *ngIf="contents$ | async as contents">
    <label for="">Padre</label>
    <select (change)="parentSelected(tempParent)" [(ngModel)]="tempParent" [ngModelOptions]="{standalone: true}">
      <option [ngValue]="null">-</option>
      <option *ngFor="let content of contents" [ngValue]="content">{{content.name}}</option>
    </select>
  </div>

  <app-storage-uploader (onFinish)="coverUploaded($event)" *ngIf="!isPdf"></app-storage-uploader>

  <div class="form-group" *ngIf="isPdf">
    <img src="assets/imgs/loader.svg" alt="" style="width: 128px;">
    <label for="">Subir PDF</label>
    <!-- <app-storage-uploader (onFinish)="addForm.patchValue({ pdf: $event })"></app-storage-uploader> -->
    <input type="file" #pdfInput id="pdf" (change)="convertPDF(pdfInput.files)">
    <label for="pdf" class="btn btn-primary">Seleccionar PDF</label>
  </div>

  <!-- TODO: Add nesting forms -->

  <button type="submit">Agregar Contenido</button>

  <pre>{{addForm.value | json}}</pre>

</form>
