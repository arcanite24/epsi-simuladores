{"version":3,"sources":["../../src/pages/notifications/notifications.module.ts","../../src/pages/notifications/notifications.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { NotificationsPage } from './notifications';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    NotificationsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(NotificationsPage),\r\n  ],\r\n})\r\nexport class NotificationsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notifications/notifications.module.ts","import { BackProvider } from './../../providers/back/back';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ToastController, LoadingController, ViewController } from 'ionic-angular';\r\nimport moment from 'moment'\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-notifications',\r\n  templateUrl: 'notifications.html',\r\n})\r\nexport class NotificationsPage {\r\n\r\n  private notis: any[] = []\r\n  private uid: string = localStorage.getItem('uid')\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private back: BackProvider,\r\n    private toast: ToastController,\r\n    private load: LoadingController,\r\n    private viewCtrl: ViewController\r\n  ) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.loadNotis()\r\n  }\r\n\r\n  reload(e) { this.loadNotis(() => e.complete()) }\r\n\r\n  loadNotis(cb?: Function) {\r\n    \r\n    const l = this.load.create({content: 'Cargando notificaciones...'})\r\n    l.present()\r\n\r\n    this.back.getNotisUser(this.uid).subscribe(data => {\r\n      this.notis = data\r\n      l.dismiss()\r\n      if (cb) cb()\r\n    }, err => {\r\n      l.dismiss()\r\n      this.toast.create({message: 'No se pudieron cargar las notificaciones', duration: 2000}).present()\r\n      this.viewCtrl.dismiss()\r\n    })\r\n\r\n  }\r\n\r\n  setRead(id: string, i: number, read?: boolean) {\r\n\r\n    if (read) return\r\n\r\n    this.notis[i].read = true\r\n    this.back.updateNoti(id, {read: this.notis[i].read}).subscribe(data => {\r\n      console.log(data)\r\n    }, err => {\r\n      this.notis[i].read = read\r\n      this.toast.create({message: 'No se pudo marcar como leída la notificación...', duration: 2000}).present()\r\n    })\r\n\r\n  }\r\n\r\n  getDate(date: string) {\r\n    return moment(date).fromNow()\r\n  }\r\n\r\n  handleClick(noti) {\r\n    if(noti.hilo) this.navCtrl.push('HiloDetailPage', {id: noti.hilo.id})\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notifications/notifications.ts"],"sourceRoot":""}